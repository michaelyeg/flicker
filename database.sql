CREATE TABLE `users` (`user_name` varchar(24) NOT NULL DEFAULT '',`password` varchar(24) DEFAULT NULL,`date_registered` date DEFAULT NULL,PRIMARY KEY (`user_name`))
CREATE TABLE `persons` (`user_name` varchar(24) NOT NULL DEFAULT '',`first_name` varchar(24) DEFAULT NULL,`last_name` varchar(24) DEFAULT NULL,`address` varchar(128) DEFAULT NULL,`email` varchar(128) DEFAULT NULL,`phone` char(10) DEFAULT NULL,PRIMARY KEY (`user_name`),UNIQUE KEY `email` (`email`),CONSTRAINT `persons_ibfk_1` FOREIGN KEY (`user_name`) REFERENCES `users` (`user_name`))
CREATE TABLE `groups` (`group_id` int(11) NOT NULL DEFAULT '0',`user_name` varchar(24) DEFAULT NULL,`group_name` varchar(24) DEFAULT NULL,`date_created` date DEFAULT NULL,PRIMARY KEY (`group_id`),UNIQUE KEY `user_name` (`user_name`,`group_name`),CONSTRAINT `groups_ibfk_1` FOREIGN KEY (`user_name`) REFERENCES `users` (`user_name`)) 
CREATE TABLE `group_lists` (`group_id` int(11) NOT NULL DEFAULT '0',`friend_id` varchar(24) NOT NULL DEFAULT '',`date_added` date DEFAULT NULL,`notice` varchar(1024) DEFAULT NULL,PRIMARY KEY (`group_id`,`friend_id`),KEY `friend_id` (`friend_id`),CONSTRAINT `group_lists_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `groups` (`group_id`),CONSTRAINT `group_lists_ibfk_2` FOREIGN KEY (`friend_id`) REFERENCES `users` (`user_name`))
CREATE TABLE `images` (`photo_id` int(11) NOT NULL DEFAULT '0',`owner_name` varchar(24) DEFAULT NULL,`permitted` int(11) DEFAULT NULL,`subject` varchar(128) DEFAULT NULL,`place` varchar(128) DEFAULT NULL,`timing` date DEFAULT NULL,`description` varchar(2048) DEFAULT NULL,`thumbnail` blob,`photo` blob,PRIMARY KEY (`photo_id`),KEY `owner_name` (`owner_name`),KEY `permitted` (`permitted`),CONSTRAINT `images_ibfk_1` FOREIGN KEY (`owner_name`) REFERENCES `users` (`user_name`),CONSTRAINT `images_ibfk_2` FOREIGN KEY (`permitted`) REFERENCES `groups` (`group_id`))

/* New Table Created */
CREATE TABLE `unique_views` (`photo_id` int(11) NOT NULL DEFAULT '0',`user_name` varchar(24) NOT NULL DEFAULT '',UNIQUE KEY `user_name` (`user_name`,`photo_id`),CONSTRAINT `unique_views_ibfk_1` FOREIGN KEY (`user_name`) REFERENCES `users` (`user_name`),CONSTRAINT `unique_views_ibfk_2` FOREIGN KEY (`photo_id`) REFERENCES `images` (`photo_id`))